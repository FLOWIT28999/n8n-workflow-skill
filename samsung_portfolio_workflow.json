{
  "name": "AI ì‚¼ì„±ì „ì í¬íŠ¸í´ë¦¬ì˜¤ ë§¤ë‹ˆì €",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "0 7 * * *"
            }
          ]
        }
      },
      "id": "schedule-trigger",
      "name": "ë§¤ì¼ ì˜¤ì „ 7ì‹œ ì‹¤í–‰",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [240, 300]
    },
    {
      "parameters": {
        "language": "python",
        "pythonCode": "# ì‚¼ì„±ì „ì ì£¼ê°€ ë°ì´í„° ìˆ˜ì§‘ (ìµœê·¼ 90ì¼)\nimport json\nfrom datetime import datetime, timedelta\n\n# Yahoo Finance ë°ì´í„° ì‹œë®¬ë ˆì´ì…˜\n# ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” yfinance ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©:\n# import yfinance as yf\n# ticker = yf.Ticker(\"005930.KS\")\n# hist = ticker.history(period=\"3mo\")\n\n# ì˜ˆì‹œ ë°ì´í„° êµ¬ì¡° (ì‹¤ì œë¡œëŠ” APIì—ì„œ ê°€ì ¸ì˜´)\nstock_data = {\n    \"symbol\": \"005930.KS\",\n    \"name\": \"ì‚¼ì„±ì „ì\",\n    \"period\": \"90days\",\n    \"data\": [\n        # ì‹¤ì œë¡œëŠ” 90ì¼ì¹˜ ë°ì´í„°\n        {\n            \"date\": (datetime.now() - timedelta(days=i)).strftime(\"%Y-%m-%d\"),\n            \"open\": 70000 + (i * 100),\n            \"high\": 72000 + (i * 100),\n            \"low\": 69000 + (i * 100),\n            \"close\": 71000 + (i * 100),\n            \"volume\": 10000000 + (i * 50000)\n        }\n        for i in range(90, 0, -1)\n    ]\n}\n\n# ì£¼ì„: ì‹¤ì œ êµ¬í˜„ ì‹œ ì•„ë˜ ì½”ë“œ ì‚¬ìš©\n# import yfinance as yf\n# ticker = yf.Ticker(\"005930.KS\")\n# end_date = datetime.now()\n# start_date = end_date - timedelta(days=90)\n# hist = ticker.history(start=start_date, end=end_date)\n# stock_data = hist.reset_index().to_dict('records')\n\nreturn {\"json\": stock_data}"
      },
      "id": "stock-data-collection",
      "name": "ì£¼ê°€ ë°ì´í„° ìˆ˜ì§‘",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [460, 200]
    },
    {
      "parameters": {
        "url": "https://news.google.com/rss/search?q=ì‚¼ì„±ì „ì+ì£¼ê°€&hl=ko&gl=KR&ceid=KR:ko"
      },
      "id": "news-rss-collection",
      "name": "ë‰´ìŠ¤ ë°ì´í„° ìˆ˜ì§‘",
      "type": "n8n-nodes-base.rssFeedRead",
      "typeVersion": 1,
      "position": [460, 300]
    },
    {
      "parameters": {
        "method": "GET",
        "url": "https://opendart.fss.or.kr/api/list.json",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "crtfc_key",
              "value": "={{ $credentials.dartApi.apiKey }}"
            },
            {
              "name": "corp_code",
              "value": "00126380"
            },
            {
              "name": "bgn_de",
              "value": "={{ $today.minus({days: 30}).toFormat('yyyyMMdd') }}"
            },
            {
              "name": "end_de",
              "value": "={{ $today.toFormat('yyyyMMdd') }}"
            },
            {
              "name": "page_count",
              "value": "10"
            }
          ]
        },
        "options": {
          "timeout": 10000
        }
      },
      "id": "dart-disclosure-collection",
      "name": "ê³µì‹œ ë°ì´í„° ìˆ˜ì§‘",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [460, 400]
    },
    {
      "parameters": {
        "method": "GET",
        "url": "https://opendart.fss.or.kr/api/fnlttSinglAcntAll.json",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "crtfc_key",
              "value": "={{ $credentials.dartApi.apiKey }}"
            },
            {
              "name": "corp_code",
              "value": "00126380"
            },
            {
              "name": "bsns_year",
              "value": "2024"
            },
            {
              "name": "reprt_code",
              "value": "11014"
            },
            {
              "name": "fs_div",
              "value": "CFS"
            }
          ]
        },
        "options": {
          "timeout": 10000
        }
      },
      "id": "dart-financial-collection",
      "name": "ì¬ë¬´ì œí‘œ ìˆ˜ì§‘",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [460, 500]
    },
    {
      "parameters": {
        "mode": "combine",
        "combinationMode": "multiplex",
        "options": {}
      },
      "id": "merge-data",
      "name": "ë°ì´í„° ë³‘í•©",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3,
      "position": [680, 350]
    },
    {
      "parameters": {
        "jsCode": "// ìˆ˜ì§‘ëœ ëª¨ë“  ë°ì´í„°ë¥¼ êµ¬ì¡°í™”\nconst allItems = $input.all();\n\nlet stockData = null;\nlet newsData = [];\nlet disclosureData = [];\nlet financialData = null;\n\n// ê° ë…¸ë“œì—ì„œ ì˜¨ ë°ì´í„° ë¶„ë¥˜\nfor (const item of allItems) {\n  const json = item.json;\n  \n  // ì£¼ê°€ ë°ì´í„° ì‹ë³„\n  if (json.symbol === '005930.KS') {\n    stockData = json;\n  }\n  \n  // ë‰´ìŠ¤ ë°ì´í„° ì‹ë³„ (RSS)\n  if (json.title && json.link && json.pubDate) {\n    newsData.push({\n      title: json.title,\n      link: json.link,\n      pubDate: json.pubDate,\n      description: json.description || json.content\n    });\n  }\n  \n  // ê³µì‹œ ë°ì´í„° ì‹ë³„\n  if (json.list && Array.isArray(json.list)) {\n    disclosureData = json.list.slice(0, 5); // ìµœê·¼ 5ê°œë§Œ\n  }\n  \n  // ì¬ë¬´ì œí‘œ ì‹ë³„\n  if (json.list && json.reprt_code) {\n    financialData = json.list;\n  }\n}\n\n// í†µí•© ë°ì´í„° êµ¬ì¡°\nconst integratedData = {\n  timestamp: new Date().toISOString(),\n  symbol: '005930',\n  companyName: 'ì‚¼ì„±ì „ì',\n  stockData: stockData,\n  newsData: newsData.slice(0, 10), // ìµœê·¼ 10ê°œ ë‰´ìŠ¤\n  disclosureData: disclosureData,\n  financialData: financialData ? financialData.slice(0, 20) : null // ì£¼ìš” ì¬ë¬´ í•­ëª©\n};\n\nreturn [{ json: integratedData }];"
      },
      "id": "data-preprocessing",
      "name": "ë°ì´í„° ì „ì²˜ë¦¬",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [880, 350]
    },
    {
      "parameters": {
        "jsCode": "// ê¸°ìˆ ì  ì§€í‘œ ê³„ì‚° (RSI, ì´ë™í‰ê· ì„ , ë³¼ë¦°ì € ë°´ë“œ)\nconst data = $input.first().json;\nconst stockPrices = data.stockData?.data || [];\n\n// RSI ê³„ì‚° í•¨ìˆ˜ (14ì¼ ê¸°ì¤€)\nfunction calculateRSI(prices, period = 14) {\n  if (prices.length < period + 1) return null;\n  \n  let gains = 0;\n  let losses = 0;\n  \n  // ì²« ë²ˆì§¸ í‰ê·  ê³„ì‚°\n  for (let i = 1; i <= period; i++) {\n    const change = prices[i].close - prices[i - 1].close;\n    if (change > 0) gains += change;\n    else losses += Math.abs(change);\n  }\n  \n  let avgGain = gains / period;\n  let avgLoss = losses / period;\n  \n  // ìµœê·¼ RSI ê³„ì‚°\n  for (let i = period + 1; i < prices.length; i++) {\n    const change = prices[i].close - prices[i - 1].close;\n    if (change > 0) {\n      avgGain = (avgGain * (period - 1) + change) / period;\n      avgLoss = (avgLoss * (period - 1)) / period;\n    } else {\n      avgGain = (avgGain * (period - 1)) / period;\n      avgLoss = (avgLoss * (period - 1) + Math.abs(change)) / period;\n    }\n  }\n  \n  const rs = avgGain / avgLoss;\n  return 100 - (100 / (1 + rs));\n}\n\n// ì´ë™í‰ê· ì„  ê³„ì‚° (5ì¼, 20ì¼, 60ì¼)\nfunction calculateMA(prices, period) {\n  if (prices.length < period) return null;\n  const recentPrices = prices.slice(-period);\n  const sum = recentPrices.reduce((acc, p) => acc + p.close, 0);\n  return sum / period;\n}\n\n// ë³¼ë¦°ì € ë°´ë“œ ê³„ì‚° (20ì¼, 2Ïƒ)\nfunction calculateBollingerBands(prices, period = 20, stdDev = 2) {\n  if (prices.length < period) return null;\n  \n  const recentPrices = prices.slice(-period);\n  const closes = recentPrices.map(p => p.close);\n  \n  // ì¤‘ê°„ ë°´ë“œ (MA)\n  const middle = closes.reduce((a, b) => a + b) / period;\n  \n  // í‘œì¤€í¸ì°¨ ê³„ì‚°\n  const variance = closes.reduce((sum, price) => sum + Math.pow(price - middle, 2), 0) / period;\n  const std = Math.sqrt(variance);\n  \n  return {\n    upper: middle + (std * stdDev),\n    middle: middle,\n    lower: middle - (std * stdDev)\n  };\n}\n\n// ê±°ë˜ëŸ‰ ë¶„ì„\nfunction analyzeVolume(prices) {\n  if (prices.length < 20) return null;\n  \n  const recentVolumes = prices.slice(-20).map(p => p.volume);\n  const avgVolume = recentVolumes.reduce((a, b) => a + b) / 20;\n  const latestVolume = prices[prices.length - 1].volume;\n  \n  return {\n    average20d: avgVolume,\n    latest: latestVolume,\n    ratio: (latestVolume / avgVolume).toFixed(2),\n    trend: latestVolume > avgVolume * 1.5 ? 'ê¸‰ë“±' : latestVolume < avgVolume * 0.5 ? 'ê¸‰ê°' : 'ë³´í†µ'\n  };\n}\n\n// ì§€í‘œ ê³„ì‚°\nconst technicalIndicators = {\n  rsi: calculateRSI(stockPrices),\n  movingAverages: {\n    ma5: calculateMA(stockPrices, 5),\n    ma20: calculateMA(stockPrices, 20),\n    ma60: calculateMA(stockPrices, 60)\n  },\n  bollingerBands: calculateBollingerBands(stockPrices),\n  volume: analyzeVolume(stockPrices),\n  latestPrice: stockPrices[stockPrices.length - 1]?.close,\n  priceChange: {\n    day1: ((stockPrices[stockPrices.length - 1]?.close - stockPrices[stockPrices.length - 2]?.close) / stockPrices[stockPrices.length - 2]?.close * 100).toFixed(2),\n    day5: ((stockPrices[stockPrices.length - 1]?.close - stockPrices[stockPrices.length - 6]?.close) / stockPrices[stockPrices.length - 6]?.close * 100).toFixed(2),\n    day20: ((stockPrices[stockPrices.length - 1]?.close - stockPrices[stockPrices.length - 21]?.close) / stockPrices[stockPrices.length - 21]?.close * 100).toFixed(2)\n  }\n};\n\n// ë§¤ë§¤ ì‹ í˜¸ ìƒì„± (ë‹¨ê¸° íŠ¸ë ˆì´ë”©ìš©)\nlet tradingSignal = 'ë³´ìœ ';\nlet signalStrength = 0;\nconst reasons = [];\n\n// RSI ê¸°ë°˜ ì‹ í˜¸\nif (technicalIndicators.rsi) {\n  if (technicalIndicators.rsi < 30) {\n    signalStrength += 2;\n    reasons.push('RSI ê³¼ë§¤ë„ êµ¬ê°„ (ë§¤ìˆ˜ ì‹ í˜¸)');\n  } else if (technicalIndicators.rsi > 70) {\n    signalStrength -= 2;\n    reasons.push('RSI ê³¼ë§¤ìˆ˜ êµ¬ê°„ (ë§¤ë„ ì‹ í˜¸)');\n  }\n}\n\n// ì´ë™í‰ê· ì„  í¬ë¡œìŠ¤\nif (technicalIndicators.movingAverages.ma5 > technicalIndicators.movingAverages.ma20) {\n  signalStrength += 1;\n  reasons.push('ë‹¨ê¸° ì´í‰ì„ ì´ ì¤‘ê¸° ì´í‰ì„  ìƒíšŒ (ê³¨ë“ í¬ë¡œìŠ¤)');\n} else {\n  signalStrength -= 1;\n  reasons.push('ë‹¨ê¸° ì´í‰ì„ ì´ ì¤‘ê¸° ì´í‰ì„  í•˜íšŒ (ë°ë“œí¬ë¡œìŠ¤)');\n}\n\n// ë³¼ë¦°ì € ë°´ë“œ\nif (technicalIndicators.bollingerBands && technicalIndicators.latestPrice) {\n  if (technicalIndicators.latestPrice < technicalIndicators.bollingerBands.lower) {\n    signalStrength += 1;\n    reasons.push('ë³¼ë¦°ì € ë°´ë“œ í•˜ë‹¨ ëŒíŒŒ (ë°˜ë“± ê°€ëŠ¥ì„±)');\n  } else if (technicalIndicators.latestPrice > technicalIndicators.bollingerBands.upper) {\n    signalStrength -= 1;\n    reasons.push('ë³¼ë¦°ì € ë°´ë“œ ìƒë‹¨ ëŒíŒŒ (ì¡°ì • ê°€ëŠ¥ì„±)');\n  }\n}\n\n// ìµœì¢… ì‹ í˜¸ ê²°ì •\nif (signalStrength >= 2) tradingSignal = 'ë§¤ìˆ˜';\nelse if (signalStrength <= -2) tradingSignal = 'ë§¤ë„';\n\nconst result = {\n  ...data,\n  technicalIndicators: technicalIndicators,\n  tradingSignal: {\n    signal: tradingSignal,\n    strength: signalStrength,\n    reasons: reasons,\n    confidence: Math.min(Math.abs(signalStrength) * 25, 100) + '%'\n  }\n};\n\nreturn [{ json: result }];"
      },
      "id": "technical-indicators",
      "name": "ê¸°ìˆ ì  ì§€í‘œ ê³„ì‚°",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1080, 350]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ë‹¤ìŒ ë‰´ìŠ¤ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ê°ì„±ì„ íŒë‹¨í•´ì£¼ì„¸ìš”.\n\n{{ $json.newsData }}\n\nê° ë‰´ìŠ¤ì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ JSON ë°°ì—´ì„ ë°˜í™˜í•´ì£¼ì„¸ìš”:\n[\n  {\n    \"title\": \"ë‰´ìŠ¤ ì œëª©\",\n    \"sentiment\": \"ê¸ì •/ë¶€ì •/ì¤‘ë¦½\",\n    \"score\": 0-100,\n    \"summary\": \"í•œ ì¤„ ìš”ì•½\",\n    \"impact\": \"ì£¼ê°€ì— ë¯¸ì¹  ì˜í–¥ (ìƒìŠ¹/í•˜ë½/ì¤‘ë¦½)\"\n  }\n]\n\nì‚¼ì„±ì „ì ì£¼ì‹ íˆ¬ì ê´€ì ì—ì„œ ë¶„ì„í•´ì£¼ì„¸ìš”."
      },
      "id": "sentiment-analysis",
      "name": "AI ê°ì„± ë¶„ì„",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [1280, 250],
      "credentials": {
        "googleGeminiOAuth2Api": {
          "id": "google-gemini-oauth",
          "name": "Google Gemini API"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ë‹¹ì‹ ì€ ì£¼ì‹ í¬íŠ¸í´ë¦¬ì˜¤ ë§¤ë‹ˆì €ì…ë‹ˆë‹¤. ë‹¤ìŒ ë°ì´í„°ë¥¼ ì¢…í•©ì ìœ¼ë¡œ ë¶„ì„í•˜ì—¬ ë‹¨ê¸° íŠ¸ë ˆì´ë”© ì „ëµì„ ì œì‹œí•´ì£¼ì„¸ìš”.\n\n## ê¸°ë³¸ ì •ë³´\n- ì¢…ëª©: {{ $json.companyName }} ({{ $json.symbol }})\n- ë¶„ì„ ì¼ì‹œ: {{ $json.timestamp }}\n\n## ì£¼ê°€ ë°ì´í„°\n- í˜„ì¬ê°€: {{ $json.technicalIndicators.latestPrice }}ì›\n- 1ì¼ ë³€ë™: {{ $json.technicalIndicators.priceChange.day1 }}%\n- 5ì¼ ë³€ë™: {{ $json.technicalIndicators.priceChange.day5 }}%\n- 20ì¼ ë³€ë™: {{ $json.technicalIndicators.priceChange.day20 }}%\n\n## ê¸°ìˆ ì  ì§€í‘œ\n- RSI: {{ $json.technicalIndicators.rsi }}\n- ì´ë™í‰ê· ì„ : MA5 {{ $json.technicalIndicators.movingAverages.ma5 }}, MA20 {{ $json.technicalIndicators.movingAverages.ma20 }}, MA60 {{ $json.technicalIndicators.movingAverages.ma60 }}\n- ë³¼ë¦°ì € ë°´ë“œ: ìƒë‹¨ {{ $json.technicalIndicators.bollingerBands.upper }}, ì¤‘ê°„ {{ $json.technicalIndicators.bollingerBands.middle }}, í•˜ë‹¨ {{ $json.technicalIndicators.bollingerBands.lower }}\n- ê±°ë˜ëŸ‰: {{ $json.technicalIndicators.volume.trend }} (í‰ê·  ëŒ€ë¹„ {{ $json.technicalIndicators.volume.ratio }}ë°°)\n\n## ìë™ ë§¤ë§¤ ì‹ í˜¸\n- ì‹ í˜¸: {{ $json.tradingSignal.signal }}\n- ì‹ ë¢°ë„: {{ $json.tradingSignal.confidence }}\n- ê·¼ê±°: {{ $json.tradingSignal.reasons }}\n\n## ë‰´ìŠ¤ ê°ì„± ë¶„ì„\n{{ $json.newsData }}\n\n## ì¬ë¬´/ê³µì‹œ ì •ë³´\n{{ $json.financialData }}\n{{ $json.disclosureData }}\n\n---\n\në‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë§ˆí¬ë‹¤ìš´ ë¦¬í¬íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”:\n\n# ì‚¼ì„±ì „ì ì¼ì¼ í¬íŠ¸í´ë¦¬ì˜¤ ë¶„ì„ ë¦¬í¬íŠ¸\n\n## ğŸ“Š Executive Summary\n- **ì¶”ì²œ í¬ì§€ì…˜**: [ë§¤ìˆ˜/ë§¤ë„/ë³´ìœ ]\n- **ëª©í‘œê°€**: [ê°€ê²©]ì›\n- **ì†ì ˆê°€**: [ê°€ê²©]ì›\n- **íˆ¬ì ê¸°ê°„**: [1-3ì¼/1ì£¼ì¼]\n- **ë¦¬ìŠ¤í¬ ë ˆë²¨**: [ë‚®ìŒ/ì¤‘ê°„/ë†’ìŒ]\n\n## ğŸ“ˆ ê¸°ìˆ ì  ë¶„ì„\n[ê¸°ìˆ ì  ì§€í‘œ ì¢…í•© ë¶„ì„ ë° í•´ì„]\n\n## ğŸ“° ë‰´ìŠ¤ & ê°ì„± ë¶„ì„\n[ë‰´ìŠ¤ ìš”ì•½ ë° ì‹œì¥ ì‹¬ë¦¬ ë¶„ì„]\n\n## ğŸ’¼ ì¬ë¬´ & ê³µì‹œ ë¶„ì„\n[ìµœê·¼ ì¬ë¬´ì œí‘œ ë° ê³µì‹œì‚¬í•­ ë¶„ì„]\n\n## ğŸ¯ íŠ¸ë ˆì´ë”© ì „ëµ\n### ë§¤ìˆ˜ ì „ëµ (í•´ë‹¹ ì‹œ)\n- ì§„ì… ê°€ê²©ëŒ€:\n- ë¶„í•  ë§¤ìˆ˜ ì „ëµ:\n- ì£¼ì˜ì‚¬í•­:\n\n### ë§¤ë„ ì „ëµ (í•´ë‹¹ ì‹œ)\n- ëª©í‘œ ìˆ˜ìµë¥ :\n- ì†ì ˆ ë¼ì¸:\n- ì²­ì‚° ì „ëµ:\n\n## âš ï¸ ë¦¬ìŠ¤í¬ ë¶„ì„\n[ì£¼ìš” ë¦¬ìŠ¤í¬ ìš”ì¸ ë° ëŒ€ì‘ ë°©ì•ˆ]\n\n## ğŸ“ ê²°ë¡ \n[ìµœì¢… ì¢…í•© ì˜ê²¬ ë° ì•¡ì…˜ ì•„ì´í…œ]\n\n---\n\n*ì´ ë¦¬í¬íŠ¸ëŠ” AIê°€ ìë™ ìƒì„±í•œ ê²ƒìœ¼ë¡œ, íˆ¬ì íŒë‹¨ì˜ ì°¸ê³  ìë£Œë¡œë§Œ í™œìš©í•´ì£¼ì„¸ìš”.*"
      },
      "id": "portfolio-analysis",
      "name": "AI í¬íŠ¸í´ë¦¬ì˜¤ ë¶„ì„",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [1480, 350],
      "credentials": {
        "googleGeminiOAuth2Api": {
          "id": "google-gemini-oauth",
          "name": "Google Gemini API"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// AI ë¶„ì„ ê²°ê³¼ë¥¼ ë§ˆí¬ë‹¤ìš´ íŒŒì¼ë¡œ í¬ë§·íŒ…\nconst analysisResult = $input.first().json;\nconst today = new Date().toISOString().split('T')[0];\n\n// AIê°€ ìƒì„±í•œ ë§ˆí¬ë‹¤ìš´ ë¦¬í¬íŠ¸ ì¶”ì¶œ\nlet markdownContent = '';\n\nif (typeof analysisResult === 'string') {\n  markdownContent = analysisResult;\n} else if (analysisResult.text) {\n  markdownContent = analysisResult.text;\n} else if (analysisResult.response) {\n  markdownContent = analysisResult.response;\n} else {\n  // í´ë°±: ê¸°ë³¸ í…œí”Œë¦¿ ì‚¬ìš©\n  markdownContent = `# ì‚¼ì„±ì „ì ì¼ì¼ í¬íŠ¸í´ë¦¬ì˜¤ ë¶„ì„ ë¦¬í¬íŠ¸\n\n**ìƒì„± ì¼ì‹œ**: ${new Date().toLocaleString('ko-KR', { timeZone: 'Asia/Seoul' })}\n\n## ë¶„ì„ ê²°ê³¼\n\nAI ë¶„ì„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\n\n${JSON.stringify(analysisResult, null, 2)}\n`;\n}\n\n// íŒŒì¼ëª… ìƒì„±\nconst fileName = `${today}_samsung_portfolio_report.md`;\n\nreturn [{\n  json: {\n    fileName: fileName,\n    content: markdownContent,\n    mimeType: 'text/markdown',\n    timestamp: new Date().toISOString()\n  }\n}];"
      },
      "id": "markdown-generation",
      "name": "ë§ˆí¬ë‹¤ìš´ ìƒì„±",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1680, 350]
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "upload",
        "name": "={{ $json.fileName }}",
        "resolveData": true,
        "options": {
          "mimeType": "text/markdown"
        }
      },
      "id": "google-drive-upload",
      "name": "Google Drive ì €ì¥",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [1880, 350],
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "google-drive-oauth",
          "name": "Google Drive OAuth2"
        }
      }
    },
    {
      "parameters": {
        "height": 320,
        "width": 420,
        "color": 5
      },
      "id": "sticky-note-trigger",
      "name": "ğŸ“Œ ìŠ¤ì¼€ì¤„ íŠ¸ë¦¬ê±° ì„¤ì •",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [160, 140],
      "notes": "## â° ìŠ¤ì¼€ì¤„ ì„¤ì •\n\n**ì‹¤í–‰ ì‹œê°„**: ë§¤ì¼ ì˜¤ì „ 7ì‹œ (KST)\n**Cron í‘œí˜„ì‹**: `0 7 * * *`\n**ì‹œê°„ëŒ€**: Asia/Seoul\n\n### ì„¤ì • ë°©ë²•\n1. Schedule Trigger ë…¸ë“œ í´ë¦­\n2. Trigger Interval: Cron\n3. Expression: `0 7 * * *`\n4. Timezone: Asia/Seoul ì„ íƒ\n\n### ì£¼ì˜ì‚¬í•­\n- í•œêµ­ ì‹œì¥ ê°œì¥ ì „(9ì‹œ) ì‹¤í–‰\n- ì£¼ë§/ê³µíœ´ì¼ì—ë„ ì‹¤í–‰ë¨\n- ë³„ë„ íœ´ì¼ í•„í„° ì¶”ê°€ ê°€ëŠ¥"
    },
    {
      "parameters": {
        "height": 440,
        "width": 480,
        "color": 4
      },
      "id": "sticky-note-data-collection",
      "name": "ğŸ“Œ ë°ì´í„° ìˆ˜ì§‘ API ì„¤ì •",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [380, 80],
      "notes": "## ğŸ“¡ ë°ì´í„° ìˆ˜ì§‘ ë…¸ë“œ ì„¤ì •\n\n### 1ï¸âƒ£ ì£¼ê°€ ë°ì´í„° (Code ë…¸ë“œ)\n**ë°©ë²•**: Yahoo Finance API\n**í‹°ì»¤**: 005930.KS (ì‚¼ì„±ì „ì)\n**ê¸°ê°„**: ìµœê·¼ 90ì¼\n**ì‹¤ì œ êµ¬í˜„ ì‹œ**:\n```python\nimport yfinance as yf\nticker = yf.Ticker(\"005930.KS\")\nhist = ticker.history(period=\"3mo\")\n```\n\n### 2ï¸âƒ£ ë‰´ìŠ¤ ë°ì´í„° (RSS Read)\n**URL**: https://news.google.com/rss/search?q=ì‚¼ì„±ì „ì+ì£¼ê°€&hl=ko\n**ìµœê·¼**: 7ì¼\n\n### 3ï¸âƒ£ ê³µì‹œ ë°ì´í„° (HTTP Request)\n**API**: DART OpenAPI\n**ì—”ë“œí¬ì¸íŠ¸**: https://opendart.fss.or.kr/api/list.json\n**í•„ìˆ˜ íŒŒë¼ë¯¸í„°**:\n- crtfc_key: API í‚¤ (ì‹ ì²­ í•„ìš”)\n- corp_code: 00126380 (ì‚¼ì„±ì „ì)\n- bgn_de/end_de: ë‚ ì§œ ë²”ìœ„\n\n### 4ï¸âƒ£ ì¬ë¬´ì œí‘œ (HTTP Request)\n**ì—”ë“œí¬ì¸íŠ¸**: https://opendart.fss.or.kr/api/fnlttSinglAcntAll.json\n**ë³´ê³ ì„œ**: 11014 (3ë¶„ê¸°ë³´ê³ ì„œ)\n**ì¬ë¬´ì œí‘œ**: CFS (ì—°ê²°)"
    },
    {
      "parameters": {
        "height": 380,
        "width": 400,
        "color": 6
      },
      "id": "sticky-note-ai-analysis",
      "name": "ğŸ“Œ Gemini AI ì„¤ì •",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [1220, 80],
      "notes": "## ğŸ¤– Gemini AI ë¶„ì„ ì„¤ì •\n\n### API í‚¤ ë°œê¸‰\n1. https://makersuite.google.com ì ‘ì†\n2. API Key ìƒì„±\n3. n8n Credentials ë“±ë¡\n\n### ëª¨ë¸ ì„¤ì •\n**ëª¨ë¸**: gemini-2.0-flash-exp\n**Temperature**: 0.7 (ì°½ì˜ì„± ì¤‘ê°„)\n**Max Tokens**: 2048\n\n### í”„ë¡¬í”„íŠ¸ êµ¬ì¡°\n\n#### 1ë‹¨ê³„: ê°ì„± ë¶„ì„\n- ì…ë ¥: ë‰´ìŠ¤ ë°ì´í„°\n- ì¶œë ¥: JSON (sentiment, score, impact)\n\n#### 2ë‹¨ê³„: í¬íŠ¸í´ë¦¬ì˜¤ ë¶„ì„\n- ì…ë ¥: í†µí•© ë°ì´í„°\n- ì¶œë ¥: ë§ˆí¬ë‹¤ìš´ ë¦¬í¬íŠ¸\n  - Executive Summary\n  - ê¸°ìˆ ì  ë¶„ì„\n  - ë‰´ìŠ¤ ë¶„ì„\n  - íŠ¸ë ˆì´ë”© ì „ëµ\n  - ë¦¬ìŠ¤í¬ ë¶„ì„\n\n### ë¹„ìš© ìµœì í™”\n- Flash ëª¨ë¸ ì‚¬ìš© (ë¬´ë£Œ í•œë„)\n- Context ê¸¸ì´ ì œí•œ\n- ì¼ 1íšŒë§Œ ì‹¤í–‰"
    },
    {
      "parameters": {
        "height": 360,
        "width": 380,
        "color": 3
      },
      "id": "sticky-note-technical-indicators",
      "name": "ğŸ“Œ ê¸°ìˆ ì  ì§€í‘œ ê³„ì‚°",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [1000, 80],
      "notes": "## ğŸ“Š ê¸°ìˆ ì  ì§€í‘œ ì„¤ì •\n\n### ë‹¨ê¸° íŠ¸ë ˆì´ë”© ì§€í‘œ\n\n#### RSI (14ì¼)\n- **ê³¼ë§¤ë„**: < 30 (ë§¤ìˆ˜ ì‹ í˜¸)\n- **ê³¼ë§¤ìˆ˜**: > 70 (ë§¤ë„ ì‹ í˜¸)\n- **ì¤‘ë¦½**: 30-70\n\n#### ì´ë™í‰ê· ì„ \n- **MA5**: 5ì¼ ì´í‰ì„  (ë‹¨ê¸°)\n- **MA20**: 20ì¼ ì´í‰ì„  (ì¤‘ê¸°)\n- **MA60**: 60ì¼ ì´í‰ì„  (ì¥ê¸°)\n- **ê³¨ë“ í¬ë¡œìŠ¤**: MA5 > MA20 (ë§¤ìˆ˜)\n- **ë°ë“œí¬ë¡œìŠ¤**: MA5 < MA20 (ë§¤ë„)\n\n#### ë³¼ë¦°ì € ë°´ë“œ (20ì¼, 2Ïƒ)\n- **ìƒë‹¨ ëŒíŒŒ**: ì¡°ì • ê°€ëŠ¥ì„±\n- **í•˜ë‹¨ ëŒíŒŒ**: ë°˜ë“± ê°€ëŠ¥ì„±\n- **ì¤‘ì‹¬ì„ **: 20ì¼ ì´í‰ì„ \n\n#### ê±°ë˜ëŸ‰\n- **20ì¼ í‰ê·  ëŒ€ë¹„**\n- **1.5ë°° ì´ìƒ**: ê¸‰ë“±\n- **0.5ë°° ì´í•˜**: ê¸‰ê°\n\n### ë§¤ë§¤ ì‹ í˜¸ ìƒì„±\n**ê°•ë„**: -5 ~ +5\n- **+2 ì´ìƒ**: ë§¤ìˆ˜\n- **-2 ì´í•˜**: ë§¤ë„\n- **ê·¸ ì™¸**: ë³´ìœ "
    },
    {
      "parameters": {
        "height": 340,
        "width": 360,
        "color": 7
      },
      "id": "sticky-note-output",
      "name": "ğŸ“Œ Google Drive ì¶œë ¥ ì„¤ì •",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [1800, 80],
      "notes": "## ğŸ’¾ Google Drive ì €ì¥ ì„¤ì •\n\n### OAuth2 ì¸ì¦\n1. Google Cloud Console\n2. API í™œì„±í™”: Google Drive API\n3. OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID ìƒì„±\n4. n8n Credentials ë“±ë¡\n\n### íŒŒì¼ ì„¤ì •\n**íŒŒì¼ëª… í˜•ì‹**: \n`YYYY-MM-DD_samsung_portfolio_report.md`\n\n**ì˜ˆì‹œ**: \n`2025-01-15_samsung_portfolio_report.md`\n\n**MIME íƒ€ì…**: text/markdown\n\n### ì €ì¥ ìœ„ì¹˜\n- **ê¸°ë³¸**: My Drive ë£¨íŠ¸\n- **ê¶Œì¥**: ì „ìš© í´ë” ìƒì„±\n  - í´ë”ëª…: \"Stock Reports\"\n  - ìë™ ì •ë¦¬ ê°€ëŠ¥\n\n### íŒŒì¼ ê´€ë¦¬\n- ë§¤ì¼ ìƒˆ íŒŒì¼ ìƒì„±\n- íˆìŠ¤í† ë¦¬ ë³´ê´€\n- 30ì¼ ì´ìƒ ëœ íŒŒì¼ ìë™ ì‚­ì œ (ì„ íƒ)\n\n### ê¶Œí•œ\n- drive.file (ìƒì„±í•œ íŒŒì¼ë§Œ)\n- ë˜ëŠ” drive (ì „ì²´ ì ‘ê·¼)"
    }
  ],
  "connections": {
    "ë§¤ì¼ ì˜¤ì „ 7ì‹œ ì‹¤í–‰": {
      "main": [
        [
          {
            "node": "ì£¼ê°€ ë°ì´í„° ìˆ˜ì§‘",
            "type": "main",
            "index": 0
          },
          {
            "node": "ë‰´ìŠ¤ ë°ì´í„° ìˆ˜ì§‘",
            "type": "main",
            "index": 0
          },
          {
            "node": "ê³µì‹œ ë°ì´í„° ìˆ˜ì§‘",
            "type": "main",
            "index": 0
          },
          {
            "node": "ì¬ë¬´ì œí‘œ ìˆ˜ì§‘",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì£¼ê°€ ë°ì´í„° ìˆ˜ì§‘": {
      "main": [
        [
          {
            "node": "ë°ì´í„° ë³‘í•©",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ë‰´ìŠ¤ ë°ì´í„° ìˆ˜ì§‘": {
      "main": [
        [
          {
            "node": "ë°ì´í„° ë³‘í•©",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "ê³µì‹œ ë°ì´í„° ìˆ˜ì§‘": {
      "main": [
        [
          {
            "node": "ë°ì´í„° ë³‘í•©",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "ì¬ë¬´ì œí‘œ ìˆ˜ì§‘": {
      "main": [
        [
          {
            "node": "ë°ì´í„° ë³‘í•©",
            "type": "main",
            "index": 3
          }
        ]
      ]
    },
    "ë°ì´í„° ë³‘í•©": {
      "main": [
        [
          {
            "node": "ë°ì´í„° ì „ì²˜ë¦¬",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ë°ì´í„° ì „ì²˜ë¦¬": {
      "main": [
        [
          {
            "node": "ê¸°ìˆ ì  ì§€í‘œ ê³„ì‚°",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ê¸°ìˆ ì  ì§€í‘œ ê³„ì‚°": {
      "main": [
        [
          {
            "node": "AI ê°ì„± ë¶„ì„",
            "type": "main",
            "index": 0
          },
          {
            "node": "AI í¬íŠ¸í´ë¦¬ì˜¤ ë¶„ì„",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI ê°ì„± ë¶„ì„": {
      "main": [
        [
          {
            "node": "AI í¬íŠ¸í´ë¦¬ì˜¤ ë¶„ì„",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "AI í¬íŠ¸í´ë¦¬ì˜¤ ë¶„ì„": {
      "main": [
        [
          {
            "node": "ë§ˆí¬ë‹¤ìš´ ìƒì„±",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ë§ˆí¬ë‹¤ìš´ ìƒì„±": {
      "main": [
        [
          {
            "node": "Google Drive ì €ì¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "saveManualExecutions": true,
    "callerPolicy": "workflowsFromSameOwner",
    "errorWorkflow": "",
    "timezone": "Asia/Seoul",
    "saveExecutionProgress": true,
    "saveDataErrorExecution": "all",
    "saveDataSuccessExecution": "all"
  },
  "staticData": null,
  "tags": [
    {
      "createdAt": "2025-01-15T00:00:00.000Z",
      "updatedAt": "2025-01-15T00:00:00.000Z",
      "id": "1",
      "name": "ì£¼ì‹"
    },
    {
      "createdAt": "2025-01-15T00:00:00.000Z",
      "updatedAt": "2025-01-15T00:00:00.000Z",
      "id": "2",
      "name": "AI"
    },
    {
      "createdAt": "2025-01-15T00:00:00.000Z",
      "updatedAt": "2025-01-15T00:00:00.000Z",
      "id": "3",
      "name": "í¬íŠ¸í´ë¦¬ì˜¤"
    }
  ],
  "pinData": {},
  "versionId": "1.0.0",
  "meta": {
    "templateCredsSetupCompleted": false,
    "instanceId": "self-hosted"
  }
}
